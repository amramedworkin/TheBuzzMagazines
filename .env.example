# ============================================================================
# TheBuzzMagazines Environment Configuration - EXAMPLE
# ============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# VARIABLE GROUP OVERVIEW:
# ------------------------
# AZURE_PROVISION_MYSQL_*  - Azure infrastructure creation (az cli)
# AZURE_RESOURCE_*            - Azure resource naming and location
# AZURE_STORAGE_*             - Azure Files storage account
# AZURE_ACR_*                 - Azure Container Registry
# AZURE_CONTAINER_*           - Azure Container Apps
# SUITECRM_RUNTIME_MYSQL_*    - Docker container DB connection (runtime)
# SUITECRM_*                  - SuiteCRM application settings
# MIGRATION_SOURCE_MYSQL_*    - Legacy MySQL DB to read FROM during migration
# MIGRATION_DEST_MYSQL_*      - SuiteCRM MySQL DB to write TO during migration
# BUZZ_ADVERT_MSACCESS_*      - Legacy MS Access database (if direct access needed)
#
# NOTE: SuiteCRM's actual configuration files (config.php, config_override.php)
# are generated inside the Docker container at runtime by docker-entrypoint.sh.
# Those files are ephemeral and outside the scope of this .env file.
#
# See docs/ENV_GUIDE.md for detailed documentation.
# ============================================================================

# ============================================================================
# AZURE RESOURCE CONFIGURATION
# ============================================================================
# Core Azure settings: subscription, region, and naming conventions.
# Used by: scripts/azure-provision.sh
# ============================================================================

# Azure subscription ID (GUID from Azure Portal > Subscriptions)
AZURE_SUBSCRIPTION_ID=your-subscription-id-guid

# Azure region for all resources (e.g., eastus, westus2, southcentralus)
AZURE_LOCATION=southcentralus

# Naming prefix - all Azure resources use this (keep short, lowercase, alphanumeric)
AZURE_RESOURCE_PREFIX=buzzmag
AZURE_RESOURCE_GROUP=rg-${AZURE_RESOURCE_PREFIX}-suitecrm

# ============================================================================
# AZURE PROVISIONING: MYSQL FLEXIBLE SERVER
# ============================================================================
# Settings for CREATING the Azure MySQL server via az cli.
# These control the infrastructure (SKU, storage, version).
# Used by: scripts/azure-provision.sh
# ============================================================================

AZURE_PROVISION_MYSQL_SERVER_NAME=${AZURE_RESOURCE_PREFIX}-mysql
AZURE_PROVISION_MYSQL_SKU=Standard_B1ms
AZURE_PROVISION_MYSQL_STORAGE_GB=32
AZURE_PROVISION_MYSQL_VERSION=8.0-lts

# ============================================================================
# AZURE STORAGE ACCOUNT (Azure Files)
# ============================================================================
# Persistent file storage for SuiteCRM uploads, customizations, cache.
# Used by: scripts/azure-provision.sh, scripts/azure-mount.sh
# ============================================================================

AZURE_STORAGE_ACCOUNT_NAME=${AZURE_RESOURCE_PREFIX}storage
AZURE_STORAGE_SKU=Standard_LRS

# ============================================================================
# AZURE CONTAINER REGISTRY
# ============================================================================
# Docker image repository in Azure.
# Used by: scripts/azure-provision.sh, deployment scripts
# ============================================================================

AZURE_ACR_NAME=${AZURE_RESOURCE_PREFIX}acr
AZURE_ACR_SKU=Basic

# ============================================================================
# AZURE CONTAINER APPS
# ============================================================================
# Serverless container hosting configuration.
# Used by: deployment scripts
# ============================================================================

AZURE_CONTAINER_APP_ENV=${AZURE_RESOURCE_PREFIX}-cae
AZURE_CONTAINER_APP_NAME=suitecrm

# ============================================================================
# SUITECRM RUNTIME: MYSQL CONNECTION
# ============================================================================
# How the Docker container CONNECTS to the database at runtime.
# These are passed to docker-entrypoint.sh which generates SuiteCRM config.
# Used by: docker-compose.yml, docker-entrypoint.sh
# ============================================================================

SUITECRM_RUNTIME_MYSQL_HOST=${AZURE_PROVISION_MYSQL_SERVER_NAME}.mysql.database.azure.com
SUITECRM_RUNTIME_MYSQL_PORT=3306
SUITECRM_RUNTIME_MYSQL_NAME=suitecrm
SUITECRM_RUNTIME_MYSQL_USER=suitecrm
SUITECRM_RUNTIME_MYSQL_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# SSL Settings (required for Azure MySQL)
SUITECRM_RUNTIME_MYSQL_SSL_ENABLED=true
SUITECRM_RUNTIME_MYSQL_SSL_VERIFY=true

# ============================================================================
# SUITECRM APPLICATION SETTINGS
# ============================================================================
# Application-level configuration for SuiteCRM.
# Used by: docker-entrypoint.sh
# ============================================================================

SUITECRM_SITE_URL=http://localhost
SUITECRM_ADMIN_USER=admin
SUITECRM_ADMIN_PASSWORD=CHANGE_ME_ADMIN_PASSWORD
SUITECRM_LOG_LEVEL=debug
SUITECRM_INSTALLER_LOCKED=false

# ============================================================================
# MIGRATION SOURCE: MYSQL (Legacy Advertisers Database)
# ============================================================================
# Connection to the EXISTING MySQL database containing data migrated from
# MS Access. Migration scripts READ from this database.
# Used by: scripts/cli.sh (backup commands), future migration scripts
# ============================================================================

MIGRATION_SOURCE_MYSQL_HOST=localhost
MIGRATION_SOURCE_MYSQL_PORT=3306
MIGRATION_SOURCE_MYSQL_NAME=advertisers
MIGRATION_SOURCE_MYSQL_USER=your_username
MIGRATION_SOURCE_MYSQL_PASSWORD=your_password

# ============================================================================
# MIGRATION DESTINATION: MYSQL (SuiteCRM Database)
# ============================================================================
# Connection to the SuiteCRM database for WRITING migrated data.
# Migration scripts WRITE to this database.
# Used by: future migration scripts
# ============================================================================

MIGRATION_DEST_MYSQL_HOST=localhost
MIGRATION_DEST_MYSQL_PORT=3306
MIGRATION_DEST_MYSQL_NAME=suitecrm
MIGRATION_DEST_MYSQL_USER=your_username
MIGRATION_DEST_MYSQL_PASSWORD=your_password

# ============================================================================
# LEGACY MS ACCESS DATABASE (Optional)
# ============================================================================
# Direct connection to the original MS Access database if needed.
# May require ODBC driver and mdbtools on Linux.
# Used by: future migration scripts (if direct Access access is needed)
# ============================================================================

BUZZ_ADVERT_MSACCESS_PATH=/path/to/BuzzAdvertisers.mdb
BUZZ_ADVERT_MSACCESS_DRIVER=MDBTools
BUZZ_ADVERT_MSACCESS_USER=
BUZZ_ADVERT_MSACCESS_PASSWORD=

# ============================================================================
# GENERAL CONFIGURATION
# ============================================================================

# Timezone for logs, scheduled tasks, and date displays
TZ=America/Chicago

# Skip database wait on container startup (for debugging)
SKIP_DB_WAIT=false

# ============================================================================
# LOCAL AZURE FILES MOUNT PATHS
# ============================================================================
# Where Azure File shares are mounted locally via SMB.
# Used by: docker-compose.yml, scripts/azure-mount.sh
# ============================================================================

AZURE_FILES_MOUNT_BASE=/mnt/azure/suitecrm

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================

BACKUP_DIR=database/backups
